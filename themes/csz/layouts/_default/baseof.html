<!DOCTYPE html>
<html lang="{{ or site.Language.LanguageCode site.Language.Lang }}" dir="{{ or site.Language.LanguageDirection `ltr` }}">
<head>
  {{ partial "head.html" . }}
</head>
<body>
  <header>
    {{ partial "header.html" . }}
  </header>
  <main>
    {{ block "main" . }}{{ end }}
  </main>
  <footer>
    {{ partial "footer.html" . }}
  </footer>
  {{ if .IsPage }}
  <script>
    // 等待页面加载完成
      document.addEventListener("DOMContentLoaded", function() {
          // 获取所有图片元素
          const images = document.querySelectorAll(".post img");
      
          // 遍历每个图片
          images.forEach(image => {
              // 创建一个占位框
              const placeholder = document.createElement("div");
              placeholder.classList.add("image-placeholder");
      
              // 添加一个中间的图片标志的SVG
              const svg = document.createElement("div");
              svg.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1024 1024"><path d="M432.888596 655.403778 359.342127 553.64633C349.598306 540.164971 333.800712 540.16511 324.05699 553.64633L188.471613 741.23959C178.727792 754.72095 184.541661 765.649501 201.457031 765.649501L447.704979 765.649501 822.658642 765.649501C839.583509 765.649501 845.267916 754.74485 835.42945 741.293282L620.563382 447.519305C610.659782 433.978682 594.773609 434.067737 584.935143 447.519305L432.888596 655.403778 432.888596 655.403778Z" fill="#979797"></path><path d="M273.271058 347.873852a58.4 58.4 0 1 0 119.364471 0 58.4 58.4 0 1 0-119.364471 0" fill="#979797"></path><path d="M109.081528 198.668263 914.918473 198.668263C906.5326 198.668263 899.934531 191.991158 899.934531 183.80075L899.934531 840.19925C899.934531 831.991651 906.565377 825.331737 914.918473 825.331737L109.081528 825.331737C117.4674 825.331737 124.065469 832.008842 124.065469 840.19925L124.065469 183.80075C124.065469 192.008349 117.434624 198.668263 109.081528 198.668263ZM64.383234 840.19925C64.383234 864.812398 84.345684 885.013972 109.081528 885.013972L914.918473 885.013972C939.585548 885.013972 959.616766 864.894939 959.616766 840.19925L959.616766 183.80075C959.616766 159.187602 939.654316 138.986028 914.918473 138.986028L109.081528 138.986028C84.414452 138.986028 64.383234 159.105061 64.383234 183.80075L64.383234 840.19925Z" fill="#979797"></path></svg>';
      
              // 添加SVG到占位框
              placeholder.appendChild(svg);
      
              // 添加边框样式
              placeholder.style.border = "1px dashed #979797";
              placeholder.style.display = "flex";
              placeholder.style.justifyContent = "center";
              placeholder.style.alignItems = "center";
      
              // 将占位框插入到图片之前
              image.parentNode.insertBefore(placeholder, image);
      
              // 预加载图片以获取其尺寸
              const tempImage = new Image();
              tempImage.src = image.src;
      
              tempImage.onload = function() {
                  // 获取图片的实际宽度和高度
                  const imageWidth = this.width;
                  const imageHeight = this.height;
      
                  // 设置占位框的大小与图片相同
                  placeholder.style.width = imageWidth + "px";
                  placeholder.style.maxHeight  = imageHeight + "px";
      
                  // 删除占位框，显示实际图片
                  placeholder.parentNode.removeChild(placeholder);
                  image.style.display = "block";
              };
              // 图片加载失败的处理
            tempImage.onerror = function() {
                // 设置占位框的样式为加载失败的 SVG
                placeholder.innerHTML = '<svg t="1697386885221" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7306" width="200" height="200"><path d="M320 896H242.166667l273.753333-273.746667a21.333333 21.333333 0 0 0 3.16-26.133333L429.653333 447.066667l165.426667-330.86A21.333333 21.333333 0 0 0 576 85.333333H96a53.393333 53.393333 0 0 0-53.333333 53.333334v746.666666a53.393333 53.393333 0 0 0 53.333333 53.333334h224a21.333333 21.333333 0 0 0 0-42.666667zM96 128h445.48L386.253333 438.46a21.333333 21.333333 0 0 0 0.786667 20.513333L474 603.86l-69.333333 69.333333-89.62-89.653333a53.333333 53.333333 0 0 0-75.426667 0L85.333333 737.826667V138.666667a10.666667 10.666667 0 0 1 10.666667-10.666667z m-10.666667 757.333333v-87.166666l184.46-184.453334a10.666667 10.666667 0 0 1 15.08 0L374.5 703.333333l-192.666667 192.666667H96a10.666667 10.666667 0 0 1-10.666667-10.666667z m192-458.666666c58.813333 0 106.666667-47.853333 106.666667-106.666667s-47.853333-106.666667-106.666667-106.666667-106.666667 47.853333-106.666666 106.666667 47.853333 106.666667-106.666666 106.666667 47.853333 106.666667 106.666666 106.666667z m0-170.666667a64 64 0 1 1-64 64 64.073333 64.073333 0 0 1 64-64z m650.666667-128H661.333333a21.333333 21.333333 0 0 0-19.08 11.793333l-0.046666 0.086667c-0.04 0.086667-0.086667 0.173333-0.126667 0.253333L535.586667 353.126667a21.333333 21.333333 0 1 0 38.16 19.08L674.52 170.666667H928a10.666667 10.666667 0 0 1 10.666667 10.666666v471.166667l-154.953334-154.96a53.333333 53.333333 0 0 0-75.426666 0L571.08 634.746667a21.333333 21.333333 0 0 0-3.153333 26.153333l24.666666 41.08-203.646666 244.36A21.333333 21.333333 0 0 0 405.333333 981.333333h522.666667a53.393333 53.393333 0 0 0 53.333333-53.333333V181.333333a53.393333 53.393333 0 0 0-53.333333-53.333333z m0 810.666667H450.88l184.173333-221.006667a21.333333 21.333333 0 0 0 1.906667-24.666667l-23.933333-39.886666 125.433333-125.426667a10.666667 10.666667 0 0 1 15.08 0L938.666667 712.833333V928a10.666667 10.666667 0 0 1-10.666667 10.666667z" fill="#5C5C66" p-id="7307"></path></svg>';
    
                // 添加加载失败的样式
                placeholder.style.border = "1px dashed red"; // 例如，加载失败时的边框颜色为红色
            };
          });
      });
      </script>
  {{ end }}
</body>
</html>
